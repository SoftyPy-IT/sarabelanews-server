openapi: 3.0.1
info:
  title: Category Management API
  description: API for managing categories.
  version: 1.0.0
  contact:
    name: API Support
    email: support@example.com
    url: https://www.example.com
paths:
  /categories:
    get:
      summary: Retrieve all categories
      description: Fetch all categories with pagination, filtering, sorting, and searching.
      operationId: getAllCategory
      tags:
        - Category
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search term for category names or descriptions.
        - in: query
          name: filter
          schema:
            type: string
          description: Filter categories by specific criteria.
        - in: query
          name: sort
          schema:
            type: string
          description: Sort categories based on fields (e.g., 'name:asc').
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number for pagination.
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of categories per page.
      responses:
        200:
          description: A list of categories with metadata for pagination.
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta:
                    type: object
                    properties:
                      total: 
                        type: integer
                        description: Total number of categories
                      page: 
                        type: integer
                        description: Current page number
                      limit:
                        type: integer
                        description: Number of categories per page
                  categories:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
    post:
      summary: Create a new category
      description: Create a new category with the provided details.
      operationId: createCategory
      tags:
        - Category
      requestBody:
        description: Category object that needs to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Category'
      responses:
        200:
          description: Category created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        400:
          description: Bad request, invalid input.
          
  /categories/{id}:
    get:
      summary: Retrieve a single category
      description: Fetch a single category by its ID.
      operationId: getSingleCategory
      tags:
        - Category
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: The ID of the category to fetch.
      responses:
        200:
          description: Category details retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        404:
          description: Category not found.
          
    put:
      summary: Update a category
      description: Update the details of an existing category.
      operationId: updateCategory
      tags:
        - Category
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: The ID of the category to update.
      requestBody:
        description: Updated category object.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Category'
      responses:
        200:
          description: Category updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        404:
          description: Category not found.
        400:
          description: Invalid request data.
          
    delete:
      summary: Delete a category
      description: Delete an existing category by its ID.
      operationId: deleteCategory
      tags:
        - Category
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: The ID of the category to delete.
      responses:
        200:
          description: Category deleted successfully.
        404:
          description: Category not found.

components:
  schemas:
    Category:
      type: object
      properties:
        _id:
          type: string
          description: Unique identifier for the category.
        name:
          type: string
          description: The name of the category.
        description:
          type: string
          description: A detailed description of the category.
        createdAt:
          type: string
          format: date-time
          description: The date and time when the category was created.
        updatedAt:
          type: string
          format: date-time
          description: The date and time when the category was last updated.
        isDeleted:
          type: boolean
          description: Flag to indicate if the category is deleted.
    Error:
      type: object
      properties:
        message:
          type: string
        status:
          type: integer
